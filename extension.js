"use strict";const vscode=require("vscode");function activate(e){let o,t,n,i,c,r,s,a,d,u,l,v,p,g,x,f,h,w,C,T,D,E,k,m,A,F,b=void 0,B=vscode.window.activeTextEditor;function O(){0===C?S():(void 0!==b&&clearTimeout(b),b=setTimeout(S,C))}function S(){if(void 0!==b&&clearTimeout(b),!B)return;const e=B.document,c=e.getText();if(!0===o||!0===p||!0===t||!0===g||!0===n){const i="\t",r="ã€€",s="\n",a=[],d=[],u=[],l=[],v=[];let x="[";!0!==o&&!0!==p||(x+=i),!0!==t&&!0!==g||(x+=r),!0===n&&(x+=s),x+="]";const f=new RegExp(x,"g");let h,w=B.selection,C=new vscode.Range(w.start,w.end),T=C.isEmpty;for(;null!==(h=f.exec(c));){const c=h[0],x=e.positionAt(h.index),f=e.positionAt(h.index+1),w=new vscode.Range(x,f),D={range:w};!0!==o&&!0!==p||c!==i?!0!==t&&!0!==g||c!==r?!0===n&&c===s&&v.push(D):!T&&g&&C.contains(w)?l.push(D):u.push(D):!T&&p&&C.contains(w)?d.push(D):a.push(D)}!0!==o&&!0!==p||(B.setDecorations(D,a),T||B.setDecorations(E,d)),!0!==t&&!0!==g||(B.setDecorations(k,u),T||B.setDecorations(m,l)),!0===n&&B.setDecorations(A,v)}if(!0===i){const o=c.length;B.setDecorations(F,[{range:new vscode.Range(e.positionAt(o-1),e.positionAt(o))}])}}function W(e,o,t,n,i,c,r){let s={},a=n&&r>0?(Math.max(o.length,0)*r/100).toFixed(2)+"ex":"0px",d=c?"before":"after";return s[d]={width:a},e&&(s[d].contentText=o,s[d].color=t),n&&((r?s[d]:s).backgroundColor=i),vscode.window.createTextEditorDecorationType(s)}function R(){let e=vscode.workspace.getConfiguration("whitespacepp");o=e.renderTAB,t=e.renderWS,n=e.renderLF,i=e.renderEOF,c=e.textTAB,r=e.textWS,s=e.textLF,a=e.textEOF,d=e.foreColorTAB,u=e.foreColorWS,l=e.foreColorLF,v=e.foreColorEOF,p=e.changeBackColorTAB,g=e.changeBackColorWS,x=e.changeBackColorEOF,f=e.backColorTAB,h=e.backColorWS,w=e.backColorEOF,C=e.renderingDelayMs,T=e.adjustWidthEOF,!0!==i&&(x=!1)}function y(){D=W(o,c,d,p,f,!0,0),E=W(o,c,d,!1,0,!0,0),k=W(t,r,u,g,h,!0,0),m=W(t,r,u,!1,0,!0,0),A=W(n,s,l,!1,0,!0,0),F=W(i,a,v,x,w,!1,T)}R(),y(),B&&S(),vscode.workspace.onDidChangeConfiguration(e=>{R(),y()}),vscode.window.onDidChangeActiveTextEditor(e=>{B=e,e&&O()},null,e.subscriptions),vscode.workspace.onDidChangeTextDocument(e=>{B&&e.document===B.document&&O()},null,e.subscriptions),vscode.window.onDidChangeTextEditorSelection(e=>{B&&e.textEditor===B&&O()},null,e.subscriptions)}function deactivate(){}exports.activate=activate,module.exports={activate:activate,deactivate:deactivate};